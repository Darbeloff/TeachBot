{"sections": [
	{
		"id": "intro",
		"instructions": [
			{
				"type":"set_graphic_mode",
				"mode":"image"
			},
			{
				"type": "set_graphic_mode",
				"mode": "canvas"
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":76,
				"y":69,
				"width":11,
				"height":10
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":57.8,
				"y":69,
				"width":11,
				"height":10,
				"rotate":90
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":40.8,
				"y":69,
				"width":11,
				"height":10,
				"rotate":90
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":41.5,
				"y":33.8,
				"width":11,
				"height":10
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":66,
				"y":33,
				"width":17,
				"height":13
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":19,
				"y":67,
				"width":17,
				"height":19
			},
			{
				"//":"0: Today, we will be learning about the gripper. Many of today's activities will involve the boxes and bins on the table.",
				"type":"play",
				"audio_index":0,
				"delay":true
			},
			{
				"//":"1: So, let's get started. I'm going to grab Box 1 with my hands.",
				"type":"play",
				"audio_index":1,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"avoid_collision"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"fail_init_joint_arg"
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT-0.02"
			},
			{
				"type":"gripper",
				"grip":true
			},
			{
				"//":"3: Oh, that's embarrassing. Let me try again. I think I know what I did wrong. Would you please move the box back into the designated area? Press any button on the box when you've done so.",
				"type":"play",
				"audio_index":2,
				"delay":false
			},
			{
				"type":"goToCartesianPose",
				"position":"None",
				"orientation":"None",
				"relative_pose":"None",
				"joint_angles":"fail_init_joint_arg",
				"endpoint_pose":"None"
			},
			{
				"type":"gripper",
				"grip":false
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"type":"proceed",
				"to_section":"1Dof"
			}
		]
	},
	{
		"id": "1Dof",
		"instructions":[
			{
				"//":"0: The first important concept to learn is the one I just messed up: orientation. As you saw, my hand can't grab the object like this. But...",
				"type":"play",
				"audio_index":0,
				"delay":true
			},
			{
				"//":"1: ...if I change the orientation of my hand, I can pick up this object.",
				"type":"play",
				"audio_index":1,
				"delay":false
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"success_pickup_box1"
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT/2"
			},
			{
				"type":"gripper",
				"grip":true
			},
			{
				"type":"goToCartesianPose",
				"position":"None",
				"orientation":"None",
				"relative_pose":"None",
				"joint_angles":"success_pickup_box1",
				"endpoint_pose":"None"
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT/2"
			},
			{
				"type":"gripper",
				"grip":false
			},
			{
				"type":"goToCartesianPose",
				"position":"None",
				"orientation":"None",
				"relative_pose":"None",
				"joint_angles":"success_pickup_box1",
				"endpoint_pose":"None"
			},
			{
				"type":"goToCartesianPose",
				"position":"None",
				"orientation":"None",
				"relative_pose":"None",
				"joint_angles":"above_second_box_joint_arg",
				"endpoint_pose":"None"
			},
			{
				"//":"2: Now you try. I have moved my hand over Box 2. Can you rotate my wrist so I can pick up Box 2? When you're ready for me to pick up the box, press any button on the box.",
				"type":"play",
				"audio_index":2,
				"delay":false
			},
			{
				"type":"set",
				"key":"p",
				"val":false
			},
			{
				"type":"while",
				"conditional":"#p===false",
				"instructions":[
					{
						"type":"set_robot_mode",
						"mode":"interaction ctrl",
						"orientation_x":false,
						"orientation_y":false,
						"orientation_z":true,
						"position_x":false,
						"position_y":false,
						"position_z":false
					},
					{
						"type":"wait",
						"for":"user input"
					},
					{
						"type":"set_robot_mode",
						"mode":"position"
					},
					{
						"//":"3: Alright. Let’s see.",
						"type":"play",
						"audio_index":3,
						"delay":true
					},
					{
						"type":"check_pickup",
						"store_answer_in":"wheelVal"
					},
					{
						"type":"if",
						"conditional":"#wheelVal==1",
						"if_true":[
							{
								"type":"set",
								"key":"p",
								"val":true
							}
						],
						"if_false":[
							{
								"//":"5: Oops, I couldn’t pick it up like that. This time, try to get the entire width of the box in my grasp.",
								"type":"play",
								"audio_index":5,
								"delay":false
							}
						]
					}
				]
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT/2"
			},
			{
				"type":"gripper",
				"grip":false
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT+0.1"
			},
			{
				"//":"4: Great! I was able to determine if I succesfully picked up the box by comparing the force my motors exert on my joints to maintain my position before and after closing the gripper.",
				"type":"play",
				"audio_index":4,
				"delay":true
			},
			{
				"//":"6: You just helped me change my gripper's orientation so that I could pick up the box. Now, help me pick up Box 3. This time, my gripper is already in the correct orientation, but not in the correct position. Can you move my hand so that it can pick up Box 3? When you're ready for me to pick up the box, press any button on the box.",
				"type":"play",
				"audio_index":6,
				"delay":false
			},
			{
				"type":"set",
				"key":"p",
				"val":false
			},
			{
				"type":"while",
				"conditional":"#p===false",
				"instructions":[
					{
						"type":"set_robot_mode",
						"mode":"interaction ctrl",
						"orientation_x":false,
						"orientation_y":false,
						"orientation_z":false,
						"position_x":false,
						"position_y":true,
						"position_z":false
					},
					{
						"type":"wait",
						"for":"user input"
					},
					{
						"type":"set_robot_mode",
						"mode":"position"
					},
					{
						"//":"3: Alright. Let’s see.",
						"type":"play",
						"audio_index":3,
						"delay":true
					},
					{
						"type":"check_pickup",
						"store_answer_in":"wheelVal"
					},
					{
						"type":"if",
						"conditional":"#wheelVal==1",
						"if_true":[
							{
								"type":"set",
								"key":"p",
								"val":true
							}
						],
						"if_false":[
							{
								"//":"5: Oops, I couldn’t pick it up like that. This time, try to get the entire width of the box in my grasp.",
								"type":"play",
								"audio_index":5,
								"delay":false
							}
						]
					}
				]
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT/2"
			},
			{
				"type":"gripper",
				"grip":false
			},
			{
				"type":"goToCartesianPose",
				"position":"None",
				"orientation":"None",
				"relative_pose":"None",
				"joint_angles":"above_third_box_joint_arg",
				"endpoint_pose":"None"
			},
			{
				"//":"7:Great! Before, you helped me change my gripper's orientation so that I could pick up Box 2. This time, you helped me change my gripper's position so that I could pick up Box 3.",
				"type":"play",
				"audio_index":7,
				"delay":true
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT+0.04"
			},
			{
				"type":"set_graphic_mode",
				"mode":"pos_orient"
			},
			{
				"//":"8: Now, help me pick up Box 4. If you press the red button on the side of the box, you can change my arm's position. If you press the green button on the box, you can change my arm's orientation. Feel free to switch between the two modes to figure out the difference between the position and orientation. When you're ready for me to pick up Box 4, press any button on the top of the box.",
				"type":"play",
				"audio_index":8,
				"delay":false
			},
			{
				"type":"set",
				"key":"p",
				"val":false
			},
			{
				"type":"while",
				"conditional":"#p===false",
				"instructions":[
					{
						"type":"cuff_interaction",
						"ways":false
					},
					{
						"//":"3: Alright. Let’s see.",
						"type":"play",
						"audio_index":3,
						"delay":true
					},
					{
						"type":"check_pickup",
						"store_answer_in":"wheelVal"
					},
					{
						"type":"if",
						"conditional":"#wheelVal==1",
						"if_true":[
							{
								"type":"set",
								"key":"p",
								"val":true
							}
						],
						"if_false":[
							{
								"//":"5: Oops, I couldn’t pick it up like that. This time, try to get the entire width of the box in my grasp.",
								"type":"play",
								"audio_index":5,
								"delay":false
							}
						]
					}
				]
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT/2+0.07"
			},
			{
				"//":"9: Great job!",
				"type":"play",
				"audio_index":9,
				"delay":true
			},
			{
				"type":"proceed",
				"to_section":"bins"
			}
		]
	},
	{
		"id": "bins",
		"instructions":[
			{
				"//":"0: Now that you've mastered picking up objects with a gripper, let's try placing this box into a bin. It may seem like a simple task, but I can't do it in just one motion. If I try to move the box straight into the bin, I'll collide with the side of the bin, like this.",
				"type":"play",
				"audio_index":0,
				"delay":true
			},
			{
				"type":"adjustPoseBy",
				"geometry":"position",
				"axis":"y",
				"amount":"0.22"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"above_fourth_box_joint_arg"
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT/2"
			},
			{
				"type":"gripper",
				"grip":false
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"above_fourth_box_joint_arg"
			},
			{
				"//":"1: Can you move the bin back where it was? When it's ready, press any button on the box.",
				"type":"play",
				"audio_index":1,
				"delay":false
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"//":"2: Now let’s try moving Box 2 into Bin 1.",
				"type":"play",
				"audio_index":2,
				"delay": true
			},
			{
				"//":"3: This time, instead of trying to move the box straight into the bin, I'll add a couple of steps in the middle. Help me set up a series of waypoints so that I can put the box into the bin.",
				"type":"play",
				"audio_index":3,
				"delay":true
			},
			{
				"type":"set_graphic_mode",
				"mode":"pos_orient"
			},
			{
				"//":"4: First, can you move my hand so its position is over Box 2 and the gripper is in the correct orientation? Use the red and green buttons on the side of the box to switch between position and orientation modes. Press any button on the top of the box when you're done.",
				"type":"play",
				"audio_index":4,
				"delay":false
			},
			{
				"type":"cuff_interaction",
				"ways": true
			},
			{
				"//":"5: Next, lower, my hand so that the box is in between the gripper. Make sure the gripper is low enough so that it can get a good grasp of the box. Press any button on the box to continue.",
				"type":"play",
				"audio_index":5,
				"delay":false
			},
			{
				"type":"set_robot_mode",
				"mode":"interaction ctrl",
				"orientation_x":false,
				"orientation_y":false,
				"orientation_z":false,
				"position_x":false,
				"position_y":false,
				"position_z":true,
				"in_end_point_frame":true
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"type":"set_robot_mode",
				"mode":"position",
				"ways":true
			},
			{
				"type":"gripper",
				"grip":true
			},
			{
				"//":"6: Now, lift my hand high enough so that the box higher than the bin. Press any button on the box to continue.",
				"type":"play",
				"audio_index":6,
				"delay":false
			},
			{
				"type":"set_robot_mode",
				"mode":"interaction ctrl",
				"orientation_x":false,
				"orientation_y":false,
				"orientation_z":false,
				"position_x":false,
				"position_y":false,
				"position_z":true,
				"in_end_point_frame":true
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"type":"set_robot_mode",
				"mode":"position",
				"ways":true
			},
			{
				"type":"set_graphic_mode",
				"mode":"pos_orient"
			},
			{
				"//":"7: Next, move my hand so it is directly over Bin 1 and the gripper is in the correct orientation. Use the red and green buttons on the side of the box to switch between position and orientation modes. Press any button on the top of the box to continue..",
				"type":"play",
				"audio_index":7,
				"delay":false
			},
			{
				"type":"cuff_interaction",
				"ways": true
			},
			{
				"//":"8: Finally, lower my hand so that is just above the bin. Make sure the hand is low enough so that when it drops Box 2, it doesn't drop too far, but high enough so that my grippers don't hit the side of the box. Then, press any button on the box to open my gripper.",
				"type":"play",
				"audio_index":8,
				"delay":false
			},
			{
				"type": "draw",
				"shape": "bar",
				"height_percent": "#JOINT_POSITION_5/6.28+0.5",
				"x": 19,
				"y": 85,
				"width": 9,
				"max_height": 80,
				"fillStyle": ["BlueViolet"]
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"type":"set_robot_mode",
				"mode":"position",
				"ways":true
			},
			{
				"type":"gripper",
				"grip":false
			},
			{
				"//":"9: Please stand back so I can reset my position to be over Box 4.",
				"type":"play",
				"audio_index":9,
				"delay":true
			},
			{
				"type": "draw",
				"shape": "bar",
				"height_percent": "#JOINT_POSITION_0/3.14",
				"x": 4,
				"y": 85,
				"width": 9,
				"max_height": 80,
				"fillStyle": ["#7c2629"]
			},
			{
				"type":"wait",
				"for":"time",
				"s":1
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"//":"10: Can you please put Box 2 back into its designated position? Press any button on the box once you've done so.",
				"type":"play",
				"audio_index":10,
				"delay":false
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"//":"11: Now, I'm going to place Box 2 into Bin 1 based on the waypoints you set up for me!",
				"type":"play",
				"audio_index":11,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"waypoints.pop(0)"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"waypoints.pop(0)"
			},
			{
				"type":"if",
				"conditional":"#wheelVal==7",
				"if_true":[
					{
						"//":"Good job!",
						"type":"play",
						"audio_index":9,
						"delay":true
					}
				],
				"if_false":[
					{
						"//":"Not quite. If I have one encoder for every motor, how many encoders do I have?",
						"type":"play",
						"audio_index":10,
						"delay":true
					},
					{
						"type":"numeric_input",
						"store_answer_in":"wheelVal"
					}
				]
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"waypoints.pop(0)"
			},
			{
				"type":"set_robot_mode",
				"mode":"interaction ctrl",
				"orientation_x":true,
				"orientation_y":true,
				"orientation_z":true,
				"position_x":true,
				"position_y":true,
				"position_z":true
			},
			{
				"type":"set_graphic_mode",
				"mode":"canvas",
				"clear":true
			},
			{
				"type":"draw",
				"shape":"bar",
				"height_percent": "#JOINT_POSITION_0/6.28+0.5",
				"x": 4,
				"y": 80,
				"width": 9,
				"max_height": 70,
				"fillStyle": ["#7c2629"],
				"label":"Joint 1"
			},
			{
				"type":"draw",
				"shape":"bar",
				"height_percent": "#JOINT_POSITION_1/6.28+0.5",
				"x": 18,
				"y": 80,
				"width": 9,
				"max_height": 70,
				"fillStyle": ["#7c2629"],
				"label":"Joint 2"
			},
			{
				"type":"draw",
				"shape":"bar",
				"height_percent": "#JOINT_POSITION_2/6.28+0.5",
				"x": 32,
				"y": 80,
				"width": 9,
				"max_height": 70,
				"fillStyle": ["#7c2629"],
				"label":"Joint 3"
			},
			{
				"type":"draw",
				"shape":"bar",
				"height_percent": "#JOINT_POSITION_3/6.28+0.5",
				"x": 46,
				"y": 80,
				"width": 9,
				"max_height": 70,
				"fillStyle": ["#7c2629"],
				"label":"Joint 4"
			},
			{
				"type":"draw",
				"shape":"bar",
				"height_percent": "#JOINT_POSITION_4/6.28+0.5",
				"x": 60,
				"y": 80,
				"width": 9,
				"max_height": 70,
				"fillStyle": ["#7c2629"],
				"label":"Joint 5"
			},
			{
				"type":"draw",
				"shape":"bar",
				"height_percent": "#JOINT_POSITION_5/6.28+0.5",
				"x": 74,
				"y": 80,
				"width": 9,
				"max_height": 70,
				"fillStyle": ["#7c2629"],
				"label":"Joint 6"
			},
			{
				"type":"draw",
				"shape":"bar",
				"height_percent": "#JOINT_POSITION_6/6.28",
				"x": 88,
				"y": 80,
				"width": 9,
				"max_height": 70,
				"fillStyle": ["#7c2629"],
				"label":"Joint 7"
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"type":"set_robot_mode",
				"mode":"position"
			},
			{
				"//":"13: Great job! Please stand back so I can adjust",
				"type":"play",
				"audio_index":13,
				"delay":true
			},
			{
				"type":"adjustPoseTo",
				"geometry":"position",
				"axis":"z",
				"amount":"Module.Z_TABLE+Module.BOX_HEIGHT+0.15"
			},
			{
				"type":"proceed",
				"to_section":"camera"
			}
		]
	},
	{
		"id": "camera",
		"instructions":[
			{
				"type":"set_graphic_mode",
				"mode":"canvas",
				"clear":true
			},
			{
				"//":"0: Now that we are able to put the boxes into the bins, how do I know that I successfully put the box inside the bin?",
				"type":"play",
				"audio_index":0,
				"delay":true
			},
			{
				"//":"1: If you look at my wrist, I have a camera. I can use this camera to determine the location of the box with respect to the location of the bin.",
				"type":"play",
				"audio_index":1,
				"delay":true
			},
			{
				"type":"draw",
				"shape":"arc",
				"x1":99,
				"y1":66,
				"x2":85,
				"y2":72,
				"x3":63,
				"y3":46,
				"ccw":false,
				"label":"shoulder"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"kinematics_shoulder_arc"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"kinematics_init_pos"
			},
			{
				"//":"I can only reach points along this curve. So, if I want to reach this point,",
				"type":"play",
				"audio_index":2,
				"delay":true
			},
			{
				"type":"set_graphic_mode",
				"mode":"canvas",
				"clear":true
			},
			{
				"type":"draw",
				"shape":"ball",
				"cx": 62,
				"cy": 83,
				"r": 10,
				"fillStyle": "#7c2629"
			},
			{
				"//":"4: Then, I detect the Apriltag and the contours of the bin and trace them with different colors.",
				"type":"play",
				"audio_index":3,
				"delay":true
			},
			{
				"type":"set_graphic_mode",
				"mode":"camera_color_graphic"
			},
			{
				"//":"5: The green box traces the perimeter of the bin and the blue dot indicates the center of the bin.",
				"type":"play",
				"audio_index":4,
				"delay":true
			},
			{
				"type":"draw",
				"shape":"arc",
				"x1":99,
				"y1":66,
				"x2":85,
				"y2":72,
				"x3":63,
				"y3":46,
				"ccw":false,
				"label":"shoulder"
			},
			{
				"type":"camera_off"
			},
			{
				"//":"6: Putting this into practice, this is what I see...",
				"type":"play",
				"audio_index":5,
				"delay":true
			},
			{
				"type":"set_graphic_mode",
				"mode":"canvas",
				"clear":true
			},
			{
				"type":"draw",
				"shape":"ball",
				"cx": 65,
				"cy": 50,
				"r": 10,
				"fillStyle": "#7c2629"
			},
			{
				"//":"How many motors will I need to use to reach this new point? When you think you know the answer, push my arm to the point to see if you were right.",
				"type":"play",
				"audio_index":6,
				"delay":false
			},
			{
				"type":"set_robot_mode",
				"mode":"admittance ctrl",
				"joints":[3],
				"resetPos":"kinematics_init_pos",
				"min_thresh":[1.0]
			},
			{
				"type":"wait",
				"for":"custom",
				"function":"#JOINT_POSITION_3<-2.2"
			},
			{
				"//":"1: You have now mastered putting boxes into bins with one and two degrees of freedom. Will you now help me put Box 3 into the bin on the ramp?",
				"type":"play",
				"audio_index":0,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_2"
			},
			{
				"//":"With my wrist motor, I could move along this curve,",
				"type":"play",
				"audio_index":8,
				"delay":true
			},
			{
				"type":"draw",
				"shape":"arc",
				"x1":76,
				"y1":36,
				"x2":60,
				"y2":53,
				"x3":48,
				"y3":42,
				"ccw":false,
				"label":"wrist"
			},
			{
				"type":"set_graphic_mode",
				"mode":"image"
			},
			{
				"type": "set_graphic_mode",
				"mode": "canvas",
				"clear": true
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":76,
				"y":69,
				"width":11,
				"height":10
			},
			{
				"type":"draw",
				"shape":"arc",
				"x1":93,
				"y1":98,
				"x2":63,
				"y2":80,
				"x3":46,
				"y3":32,
				"ccw":false,
				"label":"shoulderNew"
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":40.8,
				"y":69,
				"width":11,
				"height":10,
				"rotate":90
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":41.5,
				"y":33.8,
				"width":11,
				"height":10
			},
			{
				"type":"set_graphic_mode",
				"mode":"canvas",
				"clear":true
			},
			{
				"type":"draw",
				"shape":"ball",
				"cx": 93,
				"cy": 86,
				"r": 10,
				"fillStyle": "#7c2629",
				"clearRec": true
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":19,
				"y":67,
				"width":17,
				"height":19
			},
			{
				"//":"2:Before we get started, can you put Box 2 back into its designated position and put Bin 1 on the stand? Press any button on the box when you've done so.",
				"type":"play",
				"audio_index":1,
				"delay":false
			},
			{
				"type":"set_robot_mode",
				"mode":"admittance ctrl",
				"joints":[3],
				"resetPos":"joint_dot_3_init",
				"min_thresh":[1.0]
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"type":"set_robot_mode",
				"mode":"position"
			},
			{
				"//":"3: Great! Similarly to last time, can you help me create a series of waypoints so that I can put the Box 3 into the bin?",
				"type":"play",
				"audio_index":2,
				"delay":true
			},
			{
				"type":"set",
				"key":"z",
				"val":0.05
			},
			{
				"type":"while",
				"conditional":"Math.abs(#ENDPOINT_POSITION_X-#x)>0.03 || Math.abs(#ENDPOINT_POSITION_Y-(#y))>0.03 || Math.abs(#ENDPOINT_POSITION_Z-#z)>0.03",
				"instructions":[
					{
						"//":"4: First, can you move my hand so its position is over Box 3 and the gripper is in the correct orientation? Use the red and green buttons on the side of the box to switch between position and orientation modes. Press any button on the top of the box to continue.",
						"type":"play",
						"audio_index":3,
						"delay":false
					},
					{
						"type":"joint_move",
						"joints":"elbow",
						"terminatingCondition":"lambda self : self.endpoints_equal(self.limb.endpoint_pose(),dot_3,0.05) or self.finished",
						"resetPOS":"joint_dot_3_init",
						"min_thresh":"0.8",
						"bias":"BIAS_SHOULDER",
						"listen":true
					}
				]
			},
			{
				"//":"Great! Now let me try.",
				"type":"play",
				"audio_index":12,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_init"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_2_1"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3"
			},
			{
				"//":"I took two steps to get there.",
				"type":"play",
				"audio_index":13,
				"delay":true
			},
			{
				"type":"goToJointAngles",  
				"joint_angles":"joint_dot_3_init",
				"wait":true 
			},
			{
				"//":"First, I moved this motor,",
				"type":"play",
				"audio_index":14,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_2_1"
			},
			{
				"//":"then this one.",
				"type":"play",
				"audio_index":15,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3"
			},
			{
				"//":"I can also travel in four steps",
				"type":"play",
				"audio_index":16,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_init",
				"wait":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_4_1"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_4_2"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_4_3"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3"
			},
			{
				"//":"or eight steps.",
				"type":"play",
				"audio_index":17,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_init",
				"wait":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_8_1"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_8_2"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_8_3"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_8_4"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_8_5"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_8_6"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_8_7"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3"
			},
			{
				"//":"Notice how, the more steps I take, the shorter each step is and the less time I spend using my wrist before switching to my elbow. If I keep increasing the number of steps, eventually there won't be any time at all between when I am using my wrist and when I am using my elbow, like this.",
				"type":"play",
				"audio_index":18,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3_init",
				"wait":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_dot_3"
			},
			{
				"type":"clearRect"
			},
			{
				"//":"By combining all of the motions I can make with just one of my motors, I can move my hand freely through a large space!",
				"type":"play",
				"audio_index":19,
				"delay":true
			},
			{
				"//":"Grab my hand and see how large my range of motion is. I've unlocked all my motors, so my arm might drift around again. Go ahead and grab it anyway. When you're done, press any button on the box.",
				"type":"play",
				"audio_index":20,
				"delay":false
			},
			{
				"type":"interaction_control",
				"position_only":false,
				"orientation_x":true,
				"orientation_y":true,
				"orientation_z":true,
				"position_x":true,
				"position_y":true,
				"position_z":true,
				"in_end_point_frame":false,
				"PASS":true,
				"ways":false,
				"wait":true
			},
			{
				"//":"Please stand back so that I can reset my position.",
				"type":"play",
				"audio_index":21,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"default"
			},
			{
				"type":"proceed",
				"to_section":"1dOrientation"
			}
		]
	},
	{
		"id":"1dOrientation",
		"instructions":[
			{
				"//":"Now that you've learned the concept of position, let's talk about orientation.",
				"type":"play",
				"audio_index":0,
				"delay":true
			},
			{
				"//":"Pay attention to my gripper and see how it moves.",
				"type":"play",
				"audio_index":1,
				"delay":true
			},
			{
				"type":"proceed",
				"to_section":"feedback"
			}
		]
	},
	{
		"id":"feedback",
		"instructions":[
			{
				"type": "initializeDisplay"
			},
			{
				"type":"drawShape",
				"shape":"ball",
				"x_ratio": 50,
				"y_ratio": 83,
				"r_ratio": 10,
				"fillStyle": "BlueViolet",
				"label": "A",
				"labelsize_ratio": 5
			},
			{
				"type":"drawShape",
				"shape":"ball",
				"x_ratio": 39,
				"y_ratio": 45,
				"r_ratio": 10,
				"fillStyle": "#7c2629",
				"label": "B",
				"labelsize_ratio": 5
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"default"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"point_a"
			},
			{
				"//":"Now let's talk about a new concept, feedback. I've projected some points onto the table. Push my arm so that my shadow is on point B.",
				"type":"play",
				"audio_index":0,
				"delay":false
			},
			{
				"type":"joint_move",
				"joints":"elbow",
				"terminatingCondition":"lambda self : self.limb.joint_angle(elbow)<point_b[3]",
				"resetPOS":"point_a",
				"min_thresh":"1.0",
				"bias":"BIAS_SHOULDER",
				"listen":true
			},
			{
				"//":"Great! Thanks. Now I'm going to move to point B on my own.",
				"type":"play",
				"audio_index":1,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"point_a"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"point_c"
			},
			{
				"//":"Oops! This time I overshot to a new point, C.",
				"type":"play",
				"audio_index":2,
				"delay":true
			},
			{
				"type":"drawShape",
				"shape":"ball",
				"x_ratio": 37,
				"y_ratio": 15,
				"r_ratio": 10,
				"fillStyle": "DarkGreen",
				"label": "C",
				"labelsize_ratio": 5
			},
			{
				"//":"Can you correct my position back to point B?",
				"type":"play",
				"audio_index":3,
				"delay":false
			},
			{
				"type":"joint_move",
				"joints":"elbow",
				"terminatingCondition":"lambda self : self.limb.joint_angle(elbow)>point_b[3]",
				"resetPOS":"point_c",
				"min_thresh":"1.0",
				"bias":"BIAS_SHOULDER",
				"listen":true
			},
			{
				"//":"Thank you! At any point, I know the position of my arm because of my encoder. Here is position A,",
				"type":"play",
				"audio_index":4,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"point_a"
			},
			{
				"type":"drawShape",
				"shape":"bar",
				"x_ratio": 5,
				"y_ratio": 85,
				"width_ratio": 6,
				"max_height_ratio": 40,
				"height_percent": 0.3,
				"fillStyle": "BlueViolet",
				"label": "A"
			},
			{
				"//":"here is position B,",
				"type":"play",
				"audio_index":5,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"point_b"
			},
			{
				"type":"drawShape",
				"shape":"bar",
				"x_ratio": 15,
				"y_ratio": 85,
				"width_ratio": 6,
				"max_height_ratio": 40,
				"height_percent": 0.5,
				"fillStyle": "#7c2629",
				"label": "B"
			},
			{
				"//":"and here is position C.",
				"type":"play",
				"audio_index":6,
				"delay":true
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"point_c"
			},
			{
				"type":"drawShape",
				"shape":"bar",
				"x_ratio": 25,
				"y_ratio": 85,
				"width_ratio": 6,
				"max_height_ratio": 40,
				"height_percent": 0.6,
				"fillStyle": "DarkGreen",
				"label": "C"
			},
			{
				"//":"I compare my encoder reading at my current position, C, against the destination encoder position, B. If C is smaller than B, I push right. If C is longer than B, I push left. The 'feedback' from my encoders helps me decide which way to go to get to my destination. Now, please stand back.",
				"type":"play",
				"audio_index":7,
				"delay":true
			},
			{
				"type":"reset"
			},
			{
				"type":"displayImage",
				"location":"images/Welcome.png"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"default"
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"joint_push_down",
				"wait":true
			},
			{
				"//":"But that's only one demonstration of feedback. Let me show you another one. Try gently pushing down on my arm. Can you notice the difference?",
				"type":"play",
				"audio_index":8,
				"delay":false
			},
			{
				"type":"wait",
				"what":"effort",
				"timeout": 1000,
				"store_answer_in":"wait_output"
			},
			{
				"//":"Watch the projection as you push my arm. I've put up a little display showing how far you've pushed my arm and how much force I'm using to push back. The further you push my arm, the harder I tell my motors to push back. It should feel a little bit like a rubber band: the more you displace it, the harder it will want to spring back into its original position. When you're done, press any button on the box.",
				"type":"play",
				"audio_index":9,
				"delay":false
			},
			{
				"type":"joint_impedance",
				"terminatingCondition":"lambda self: self.finished",
				"tics":2
			},
			{
				"type":"projection"
			},
			{
				"//":"Before, I was using the feedback from my encoders to go somewhere new. Now, I'm using feedback to stay in one place. What am I using to know when my arm is moving? Please stand back so I can reset my arm position.",
				"type":"play",
				"audio_index":10,
				"delay":false
			},
			{
				"type":"goToJointAngles",
				"joint_angles":"default"
			},
			{
				"type":"multiple_choice",
				"store_answer_in":"wheelVal"
			},
			{
				"type":"if",
				"conditional":"#wheelVal==5",
				"if_true":[
					{
						"type":"wait",
						"for":"user input"
					},
					{
						"type":"set_robot_mode",
						"mode":"position",
						"ways":true
					},
					{
						"type":"gripper",
						"grip":true
					},
					{
						"//":"6: Now, lift my hand high enough so that the box higher than the bin. Press any button on the box to continue.",
						"type":"play",
						"audio_index":5,
						"delay":false
					},
					{
						"type":"set_robot_mode",
						"mode":"interaction ctrl",
						"orientation_x":false,
						"orientation_y":false,
						"orientation_z":false,
						"position_x":false,
						"position_y":false,
						"position_z":true,
						"in_end_point_frame":true
					},
					{
						"type":"wait",
						"for":"user input"
					},
					{
						"type":"set_robot_mode",
						"mode":"position",
						"ways":true
					},
					{
						"//":"7: Next, move my hand so that it is above Bin 1 and the gripper is in the correct orientation and is positioned in the same angle as the bin.",
						"type":"play",
						"audio_index":6,
						"delay":false
					},
					{
						"type":"set_robot_mode",
						"mode":"interaction ctrl",
						"orientation_x":true,
						"orientation_y":true,
						"orientation_z":true,
						"position_x":true,
						"position_y":true,
						"position_z":true
					},
					{
						"type":"wait",
						"for":"user input"
					},
					{
						"type":"set_robot_mode",
						"mode":"position",
						"ways":true
					},
					{
						"//":"8: Finally, lower my hand so the box is placed in the bin. Make sure the hand is low enough so that when it drops Box 3, it doesn't drop too far, but high enough so that my grippers don't hit the side of the box. Press any button on the box to continue.",
						"type":"play",
						"audio_index":7,
						"delay":false
					},
					{
						"type":"set_robot_mode",
						"mode":"interaction ctrl",
						"orientation_x":true,
						"orientation_y":true,
						"orientation_z":true,
						"position_x":true,
						"position_y":true,
						"position_z":true
					},
					{
						"type":"wait",
						"for":"user input"
					},
					{
						"type":"set_robot_mode",
						"mode":"position",
						"ways":true
					},
					{
						"type":"gripper",
						"grip":false
					},
					{
						"//":"9: Please stand back so I can reset my position to be over Box 4.",
						"type":"play",
						"audio_index":8,
						"delay":true
					},
					{
						"type":"adjustPoseBy",
						"geometry":"position",
						"axis":"z",
						"amount":"0.15"
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"above_fourth_box_joint_arg"
					},
					{
						"//":"10: Can you please put Box 3 back into its designated position? Press the scroll wheel button once you've done so.",
						"type":"play",
						"audio_index":9,
						"delay":false
					},
					{
						"type":"wait",
						"for":"user input"
					},
					{
						"//":"11: Now I am going to go through the series of waypoints you set up for me and check to see if you successfully put box three into the bin.",
						"type":"play",
						"audio_index":10,
						"delay":true
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"waypoints.pop(0)"
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"waypoints.pop(0)"
					},
					{
						"type":"gripper",
						"grip":true
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"waypoints.pop(0)"
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"waypoints.pop(0)"
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"waypoints.pop(0)",
						"speed_ratio":0.225
					},
					{
						"type":"gripper",
						"grip":false
					},
					{
						"type":"adjustPoseBy",
						"geometry":"position",
						"axis":"z",
						"amount":"0.15"
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"camera_pos2"
					},
					{
						"//":"12: Let's see if you successfully put the box into the bin.",
						"type":"play",
						"audio_index":11,
						"delay":true
					},
					{
						"type":"camera",
						"store_answer_in":"wheelVal"
					},
					{
						"type":"camera_off"
					},
					{
						"type":"if",
						"conditional":"#wheelVal==1",
						"if_true":[
							{
								"type":"set",
								"key":"p",
								"val":true
							}
						],
						"if_false":[
							{
								"//":"14: Ooops! Not quite. Please put box 3 back into its designated position and help me set a new series of waypoints. When you're ready please press any button on the box.",
								"type":"play",
								"audio_index":13,
								"delay":true
							},
							{
								"type":"wait",
								"for":"user input"
							},
							{
								"type":"goToJointAngles",
								"joint_angles":"above_fourth_box_joint_arg"
							}
						]
					}
				]
			},
			{
				"//":"13:Great job! You have fully mastered putting boxes into bins.",
				"type":"play",
				"audio_index":12,
				"delay":true
			},
			{
				"type":"proceed",
				"to_section":"coding"
			}
		]
	},
	{
		"id":"coding",
		"instructions":[
			{
				"type":"goToJointAngles",
				"joint_angles":"above_fourth_box_joint_arg"
			},
			{
				"type":"set_graphic_mode",
				"mode":"image"
			},
			{
				"type":"set_graphic_mode",
				"mode":"canvas",
				"clear":true
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":57.8,
				"y":69,
				"width":11,
				"height":10,
				"rotate":90
			},
			{
				"type":"draw",
				"shape":"rectangle",
				"x":19,
				"y":67,
				"width":17,
				"height":19
			},
			{
				"//":"1: Please put boxes 1, 3, and 4 off to the side. Press any button on the box when done.",
				"type":"play",
				"audio_index":0,
				"delay": false
			},
			{
				"type":"wait",
				"for":"user input"
			},
			{
				"//":"2: This next segment will help you practice programming the robot yourself.",
				"type":"play",
				"audio_index":1,
				"delay": true
			},
			{
				"//":"3: I am about to display a series of options you can choose from to create a series of steps to put the box into the bin. Press the desired button to do a specific task. You can choose actions more than once. Once you press an action it will be added to a list displayed in the top left corner.",
				"type":"play",
				"audio_index":2,
				"delay": true
			},
			{
				"//":"4: To remove an action from the list, simply press the white button with the minus on it. Once you have gotten the box into the bin, press the white button with a plus on the box to continue.",
				"type":"play",
				"audio_index":3,
				"delay": true
			},
			{
				"//":"5: To enter free mode, press the yellow button. Then, to set a waypoint, press any button on the box.",
				"type":"play",
				"audio_index":4,
				"delay": false
			},
			{
				"type":"set",
				"key":"p",
				"val":false
			},
			{
				"type":"while",
				"conditional":"#p===false",
				"instructions":[
					{
						"type":"set_graphic_mode",
						"mode":"image"
					},
					{
						"type":"programming_choices"
					},
					{
						"//":"6: Please stand back so I can reset my position. ",
						"type":"play",
						"audio_index":5,
						"delay": true
					},
					{
						"type":"set_graphic_mode",
						"mode":"canvas",
						"clear":true
					},
					{
						"type":"draw",
						"shape":"rectangle",
						"x":58,
						"y":69,
						"width":11,
						"height":10,
						"rotate":90
					},
					{
						"type":"draw",
						"shape":"rectangle",
						"x":19,
						"y":67,
						"width":17,
						"height":19
					},
					{
						"type":"adjustPoseBy",
						"geometry":"position",
						"axis":"z",
						"amount":"0.15"
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"above_fourth_box_joint_arg"
					},
					{
						"//":"7: Can you please put Box 2 in its original position? Press any button on the box once you've done so. ",
						"type":"play",
						"audio_index":6,
						"delay": false
					},
					{
						"type":"wait",
						"for":"user input"
					},
					{
						"//":"8: I am going to run through program you set up for me.",
						"type":"play",
						"audio_index":7,
						"delay": true
					},
					{
						"type":"set",
						"key":"q",
						"val":false
					},
					{
						"type":"while",
						"conditional":"#q===false",
						"instructions":[
							{
								"type":"complete_program"
							}
						]
					},
					{
						"type":"goToJointAngles",
						"joint_angles":"camera_pos2"
					},
					{
						"//":"9: Let's see if you successfully put the box into the bin.",
						"type":"play",
						"audio_index":8,
						"delay":true
					},
					{
						"type":"camera",
						"store_answer_in":"wheelVal"
					},
					{
						"type":"camera_off"
					},
					{
						"type":"if",
						"conditional":"#wheelVal==1",
						"if_true":[
							{
								"type":"set",
								"key":"p",
								"val":true
							}
						],
						"if_false":[
							{
								"//":"11: Ooops! Not quite. Please put box 2 back into its designated position and try again. When you're ready, press any button on the box.",
								"type":"play",
								"audio_index":10,
								"delay":true
							},
							{
								"type":"wait",
								"for":"user input"
							},
							{
								"type":"goToJointAngles",
								"joint_angles":"above_fourth_box_joint_arg"
							}
						]
					}
				]
			},
			{
				"//":"10:Great job! You are a programming expert!",
				"type":"play",
				"audio_index":9,
				"delay":true
			},
			{
				"type":"proceed",
				"to_section":"end"
			}
		]
	},
	{
		"id":"end",
		"instructions":[
			{
				"//":"1: You have learned a lot today! You successfully put multiple boxes into bins in multiple degrees of freedom, learned how my camera works, and programmed me yourself!",
				"type":"play",
				"audio_index":0,
				"delay": true
			},
			{
				"//":"2: Congratulations! You have completed Module 2.",
				"type":"play",
				"audio_index":1,
				"delay": true
			}
		]
	}
]}